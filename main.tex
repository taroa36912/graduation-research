\documentclass[12pt]{ujarticle}
\renewcommand{\abstractname}{Abstract}
\renewcommand{\contentsname}{Contents}
\renewcommand{\refname}{References}

\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{aliascnt}
\usepackage[dvipdfmx, hidelinks]{hyperref}
\usepackage[capitalize]{cleveref}
\usepackage[dvipdfmx]{graphicx}
\usepackage{amssymb}
\usepackage{bm}
\usepackage{enumitem}
\usepackage{stmaryrd}
\usepackage{chngcntr}

\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[subsection]
\crefname{theorem}{Theorem}{Theorems}
\Crefname{theorem}{Theorem}{Theorems}
\newaliascnt{proposition}{theorem}
\newtheorem{proposition}[proposition]{Proposition}
\aliascntresetthe{proposition}
\crefname{proposition}{Proposition}{Propositions}
\Crefname{proposition}{Proposition}{Propositions}
\newaliascnt{lemma}{theorem}
\newtheorem{lemma}[lemma]{Lemma}
\aliascntresetthe{lemma}
\crefname{lemma}{Lemma}{Lemmas}
\Crefname{lemma}{Lemma}{Lemmas}
\newaliascnt{corollary}{theorem}
\newtheorem{corollary}[corollary]{Corollary}
\aliascntresetthe{corollary}
\crefname{corollary}{Corollary}{Corollaries}
\Crefname{corollary}{Corollary}{Corollaries}
\theoremstyle{definition}
\newaliascnt{definition}{theorem}
\newtheorem{definition}[definition]{Definition}
\aliascntresetthe{definition}
\crefname{definition}{Definition}{Definitions}
\Crefname{definition}{Definition}{Definitions}
\newaliascnt{example}{theorem}
\newtheorem{example}[example]{Example}
\aliascntresetthe{example}
\crefname{example}{Example}{Examples}
\Crefname{example}{Example}{Examples}
\newaliascnt{remark}{theorem}
\newtheorem{remark}[remark]{Remark}
\aliascntresetthe{remark}
\crefname{remark}{Remark}{Remarks}
\Crefname{remark}{Remark}{Remarks}

\setlength{\topmargin}{0truecm}

\newcommand{\TITLE}
{Magnitude Homology of Graphs and the Magnitude as its Categorification}
\newcommand{\STNO}
{2264257}
\newcommand{\NAME}
{谷内 賢翔}
\newcommand{\ADVR}
{野崎 雄太 准教授}

\newcommand{\DATE}
{2025年 1月30日}


\newcommand{\tsum}{\mathrm{sum}}
\newcommand{\tadj}{\mathrm{adj}}
\newcommand{\aut}{\mathrm{Aut}}
\newcommand{\isom}{\xrightarrow{\sim}}
\newcommand{\mor}{\mathrm{Mor}}
\newcommand{\rank}{\mathrm{rank}}
\newcommand{\sign}{\mathrm{sign}}
\newcommand{\tor}{\mathrm{Tor}}
\newcommand{\Ker}{\mathrm{Ker}}
\newcommand{\Hom}{\mathrm{Hom}}
\newcommand{\im}{\mathrm{Im}}
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\NN}{\mathbb{N}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\CC}{\mathcal{C}}
\newcommand{\VV}{\mathcal{V}}
\newcommand{\calA}{\mathcal{A}}
\newcommand{\ob}{\mathcal{O}\mathrm{b}}
\newcommand{\graphimg}[1]{
  \includegraphics{Tikz/Graphs/out/#1}
}

\newcommand{\figgraph}[3]{
  \begin{figure}[htbp]
    \centering
    \graphimg{#1}
    \caption{#2}
    \label{#3}
  \end{figure}
}



\begin{document}
\thispagestyle{empty}
\hfil 2025年度 横浜国立大学 理工学部 数理科学EP 卒業研究
\vskip3cm
{
  \Large
  \begin{center}
    \huge
    \textbf{\TITLE}
  \end{center}
  \vfill
  \hfil
  {
    \LARGE\textbf{\STNO\ \NAME}
  }
  \vskip10Q
  \hfil\textbf{指導教員：\ADVR }
  \hfil\textbf{\DATE}
}
\vfill
\hfill
\begin{tabular}{|p{6zw}|p{6zw}|} \hline
  \hskip.5zw 指導教員印 & \hskip1.5zw 受理印 \\ \hline
   & \\[2cm] \hline 
\end{tabular}
\newpage
\begin{abstract}
Sample Abstract
\end{abstract}

\newpage
\tableofcontents

\newpage
\section{Introduction}
Lamport's guide to \LaTeX\ \cite{Lamport94}.
We denote $\approx$ as isomorphisms and $\cong$ as homeomorphisms.

\newpage
\section{The Magnitude of Graphs}
This section introduces the magnitude and the magnitude homology of a graph $G$, along with fundamental examples and properties.
Throughout this thesis, a \textit{graph} means a finite undirected graph with no loops or multiple edges. The set of vertices of a graph $G$ is denoted by $V(G)$, and the set of edges of $G$ is denoted by $E(G)$. For vertices $x, y \in V(G)$, the \textit{distance} $d_G(x,y)$ is defined as the length of a shortest path between them, where the length of a path is the number of edges it contains. If $x$ and $y$ lie in different connected components of $G$, we set $d_G(x,y)=\infty$. Now, we say that two vertex $x,y$ in $G$ lie in the same connected component if there exists a path between them.

\subsection{The Definition of the Magnitude of Graphs}
We begin by defining the magnitude of a graph. The magnitude is defined to take values in the field of rational functions over $\QQ$. It can also be interpreted as taking values in the ring of formal power series over $\ZZ$, a property that will be discussed in a later lemma.
Let $\QQ(q)$ denote the field of rational functions in a variable $q$ over $\QQ$. We also write $\ZZ[q]$ and $\ZZ \llbracket q \rrbracket$ for the polynomial ring and the ring of formal power series in $q$ over $\ZZ$, respectively.

\begin{definition}
  Let $G$ be a graph. We define the \textit{$G$-matrix} $Z_G = Z_G(q)$ over $\ZZ[q]$ whose rows and columns are indexed by the vertices of $G$, and whose $(x,y)$-entry is given by
  \[
  Z_G(q)(x,y) = q^{d(x,y)} \quad \text{ for } x,y \in V(G),
  \]
  where by convention $q^\infty = 0$.
  
\end{definition}

$G$-matrix is the square synmetric matrix.

\begin{proposition}\label{invertible}
  A $G$-matrix is invertible.
\end{proposition}

\begin{proof}
  By definition, the determinant of $Z_G$ has constant term $1$, which implies that $\det Z_G \neq 0$.
\end{proof}

\begin{definition}\label{magnitude_graphs}
  The \textit{magnitude} of a graph $G$ is defined to be the rational function given by
  \[
  \# G(q) = \sum_{x,y \in V(G)} (Z_G(q))^{-1}(x,y).
  \]
\end{definition}

\begin{remark}
  \[
    \# G(q) = \tsum(Z_G(q)^{-1}) = \frac{\tsum(\tadj(Z_G(q)))}{\det(Z_G(q))},
  \]
  where $\tadj$ is the adjugate matrix and $\tsum$ is the sum of all entries of a matrix.
\end{remark}

\begin{proposition}
  $\# G(q)$ takes values in $\ZZ \llbracket q \rrbracket$.
\end{proposition}

\begin{proof}
  Let $\det Z_G(q) = 1 - qf(q)$ for some $f(q) \in \ZZ[q]$ by \cref{invertible}. Then we have 
  \[
    \# G(q) = \frac{\tsum(\tadj(Z_G))}{\det(Z_G)} = \tsum(\tadj(Z_G)) \sum_{n=0}^{\infty} q^n f(q)^n.
  \]
  Note that $qf(q)$ has no constant term and then $\sum_{n=0}^{\infty} q^n f(q)^n$ takes values in $\ZZ \llbracket q \rrbracket$.
\end{proof}

\begin{example}
  Let $G = K_3$ (complete graph with three vertices). \\
  \figgraph{K_3.pdf}{Complete graph of three vertices}{Example_K_3} \\
  \\
  Then, we can calculate the magnitude of $K_3$ as follows:
  \[
    Z_{K_3}(q) = \begin{pmatrix}
      1 & q & q \\
      q & 1 & q \\
      q & q & 1
    \end{pmatrix}, \quad
    Z_{K_3}(q)^{-1} = \frac{1}{1 - 3q^2 + 2q^3} \begin{pmatrix}
      1 - q^2 & -q + q^2 & -q + q^2 \\
      -q + q^2 & 1 - q^2 & -q + q^2 \\
      -q + q^2 & -q + q^2 & 1 - q^2
    \end{pmatrix},
  \]
  $ \#K_3(q) = \frac{3}{1+2q}.$

\end{example}

\begin{definition}
  Let $G$ be a graph and $x \in V(G)$.
  The \textit{weight} of $x$ in $G$ is defined 
  \[
    w_G(x)(q) = \sum_{y \in V(G)}(Z_G(q))^{-1}(x,y)
  \]

  The function $w_G : V(G) \rightarrow \QQ(q)$ is called the \textit{weighting} on $G$.
\end{definition}

The magnitude can be expressed using the weighting as follows:
\[
  \# G(q) = \sum_{x \in V(G)} w_G(x)
\]

\begin{lemma}\label{weighting equation}
  For any graph $G$, the weighting $w_G$ satisfies
  \[
    \sum_{y \in V(G)} q^{d(x,y)} w_G(y) = 1 \quad \text{ for } x \in V(G).
  \]
\end{lemma}

\begin{proof}
  For any vertex $x \in V(G)$, we have 
  \[
  \begin{split}
    \sum_{y \in V(G)}q^{d(x,y)} w_G(y) &= \sum_{y,z \in V(G)}q^{d(x,y)}Z_G^{-1}(y,z) \\
    &= \sum_{y,z \in V(G)}Z_G(x,y)Z_G^{-1}(y,z) \\
    &= \sum_{z \in V(G)} \sum_{y \in V(G)}Z_G(x,y)Z_G^{-1}(y,z) \\
    &= \sum_{z \in V(G)}(Z_G Z_G^{-1})(x,z) \\
    &= \sum_{z \in V(G)}I(x,z) \\
    &= 1.
  \end{split}
  \]
\end{proof}

This equation is called the \textit{weighting equation}.

\begin{lemma}\label{unique property on weighting equation}
  Let $G$ be a graph and let $\tilde{w}_G : V(G) \rightarrow \QQ$ be a function satisfying a weighting equation.
  Then, $\tilde{w}_G = w_G$. Now, $w_G$ is the weighting on $G$.
\end{lemma}

\begin{proof}
  Let $\bm{b} = (1, 1, \dots, 1)^T$ where the length of $\bm{b}$ is $|V(G)|$ and $\bm{w}_G$ = $(w_G(x))^T_{x \in V(G)}$.
  If $\tilde{w}_G$ satisfies the weighting equation, then we have
  \[
    Z_G \tilde{\bm{w}}_G = \bm{b}.
  \]
  Since $Z_G$ is invertible by \cref{invertible}, we have $\tilde{w}_G = w_G$.
\end{proof}

This lemma shows that the weighting on a graph is unique and we use this frequently to compute the magnitude of graphs.


\subsection{Basic Properties and Examples}
This subsection presents fundamental properties and examples of magnitude. We focus on vertex-transitive graphs, disjoint unions, and Cartesian products. We also discuss the properties of magnitude within $\ZZ \llbracket q \rrbracket$.

\begin{definition}
  Let $G = (V(G), E(G)), H = (V(H), E(H))$ be graphs.
  A \textit{graph homomorphism} from $G$ to $H$ is a map $f : V(G) \rightarrow V(H)$ such that if $\{x,y\} \in E(G)$ then $\{f(x), f(y)\} \in E(H)$ or $f(x) = f(y)$.
\end{definition}

We can define a \textit{graph automorphism} using the definition above. We denote the group of all graph automorphisms of a graph $G$ by $\aut(G)$. $\aut(G)$ includes $id_G$ and for $g,h \in \aut(G)$ and $x \in V(G)$, $g(h(x)) = (gh)(x)$, which means $\aut(G)$ acts on $V(G)$.
\begin{definition}
  A graph $G$ is \textit{vertex-transitive} if $\aut(G)$ acts transitively on $V(G)$.
  It says that for any vertices $x$ and $y$ of $G$, there exists an automorphism $g : G \rightarrow G$ such that $y = g(x)$.
\end{definition}

\begin{lemma}
  Let $G$ be a vertex-transitive graph.
  Then, 

  \[
    \# G(q) = \frac{|V(G)|}{\sum_{y \in V(G)} q^{d(x,y)}}
  \]

  for any vertex $x \in V(G)$.
\end{lemma}

\begin{proof}
  Let $S(x) = \sum_{y \in V(G)} q^{d(x,y)}$ for a vertex $x \in V(G)$. We show that $S(x)$ does not depend on the choice of $x$.  Take any vertices $a,b \in V(G)$.
  Since $G$ is vertex-transitive, there exists $g \in \aut(G)$ such that $b = g(a)$.
  Then,
  \[
    \begin{split}
      S(b) &= \sum_{y \in V(G)} q^{d(b,y)} \\
      &= \sum_{y \in V(G)} q^{d(g(a),y)} \\
      &= \sum_{y \in V(G)} q^{d(g(a), g(y))} \quad (\text{since } g \text{ is bijective}) \\
      &= \sum_{y \in V(G)} q^{d(a,y)} \quad (\text{since } g \text{ is an isomorphism})  \\
      &= S(a).
    \end{split}
  \]

  Thus, $S(x)$ does not depend on the choice of $x$, denoting it by $S$.
  Now, we define a function $\tilde{w}_G : V(G) \rightarrow \QQ(q)$ by $\tilde{w}_G(x) = \frac{1}{S}$ for any vertex $x \in V(G)$.
  Then $\tilde{w}_G$ satisfies the weighting equation and by \cref{unique property on weighting equation}, we have $\# G = \frac{|V(G)|}{S}$.
  
\end{proof}


\begin{example}
  \begin{enumerate}[label=(\roman*)]
    \item $G = V_n$ (edgeless graph with $n$ vertices). \\
    \figgraph{n_vertex.pdf}{The graph with no edges}{example_no_edge_graph} \\ 
    Then, $\aut(G) \approx \mathfrak{S}_n$ and $G$ is vertex-transitive. $S = 1$ and we have $\# V_n = n$.
    Now, the empty graph can be denoted by $V_0$.
    \item $G = K_n$ (complete graph with $n$ vertices). \\
    \figgraph{K_n.pdf}{Complete graph}{example_complete_graph} \\
    Then, $\aut(G) \approx \mathfrak{S}_n$ and $G$ is vertex-transitive. $S = 1 + (n-1)q$ and we have $\# K_n = \frac{n}{1 + (n-1)q}$.
    \item $G = C_n$ (cycle graph with $n$ vertices). \\
    \figgraph{C_n.pdf}{Cycle graph}{example_cycle_graph} \\
    Then, $\aut(G) \approx D_{2n}$ and $G$ is vertex-transitive.
    If $n = 2m$, then $S = 1 + 2(q + q^2 + \dots + q^{m-1}) + q^m = \frac{1 + q - q^m - q^{m+1}}{1 - q}$. Thus, we have $\# C_{2m} = \frac{2m(1-q)}{(1+q)(1-q^m)} = \frac{n(1-q)}{(1+q)(1-q^m)}$.
    If $n=2m-1$, then similarly 
    $\# C_{2m-1} = \frac{n(1-q)}{1+q-2q^m}$.
    \item $G$ is the Petersen graph. \\
    \figgraph{Petersen.pdf}{Petersen graph}{example_petersen_graph} \\
    Then, $\aut(G)$ contains $D_{10}$ as its subgroup and $G$ is vertex-transitive. $S = 1 + 3q + 6q^2$ and we have $\# G = \frac{10}{1 + 3q + 6q^2}$.
    \item $G = K_{m,n}$(complete bipartite graph). \\
    \figgraph{K_mn.pdf}{complete bipartite graph}{example_complete_bipartite_graph} \\
    Then, $\aut(G) \approx \mathfrak{S}_m \times \mathfrak{S}_n$ if $m \neq n$ and $G$ is not vertex-transitive. We can calculate the magnitude with other methods. Let $a,b$ be the weight of vertices on each part of $K_{m,n}$. Then, the weighting equation is written by two equations as follows:
    \[
      \begin{cases}
        \{ q^0 + (m-1)q^2 \} a + nqb = 1. \\
        \{q^0 + (n-1)q^2 \} b + mqa = 1.
      \end{cases}
    \]
    We can solve this and we have 
    \[
      \# K_{m,n} = ma + nb = \frac{(m+n) - (2mn - m - n)q}{(1+q)(1-(m-1)(n-1)q^2)}.
    \]
  \end{enumerate}
\end{example}

\begin{lemma}\label{disjoint_union}
  Let $G$ and $H$ be graphs. Then, 
  \[
    \#(G \sqcup H) = \# G + \# H,
  \]
  where $G \sqcup H$ is the disjoint union of $G$ and $H$.
\end{lemma}

\begin{proof}
  $Z_{G \sqcup H} = 
  \begin{pmatrix}
    Z_G & O \\
    O & Z_H
  \end{pmatrix}, 
  Z_{G \sqcup H}^{-1} = 
  \begin{pmatrix}
    Z_G^{-1} & O \\
    O & Z_H^{-1}
  \end{pmatrix}$.

  Thus, 
  \[
    \#(G \sqcup H) = \tsum(Z_{G \sqcup H}^{-1}) = \tsum(Z_G^{-1}) + \tsum(Z_H^{-1}) = \# G + \# H.
  \]
\end{proof}

\begin{definition}
  Let $G$ and $H$ be graphs. The \textit{cartesian product} $G \square H$ of $G$ and $H$ is the graph defined as follows;
  \begin{itemize}
    \item $V(G \square H) = V(G) \times V(H)$.
    \item $E(G \square H) = \{\{ (x,y), (x', y') \} \mid x=x' \text{ and } \{y,y'\} \in E(H) \text{ or } y=y' \text{ and } \{x,x'\} \in E(G)\}$.
  \end{itemize}
\end{definition}

\begin{lemma}
  $\# (G \square H) = \# G \cdot \# H$.
\end{lemma}

\begin{proof}
  For $x, x' \in V(G)$ and $y, y' \in V(H)$, \\
  $d_{G \square H}((x,y), (x',y')) = d_G(x,x') + d_H(y,y')$, \\
  $Z_{G \square H}((x,y), (x',y')) = q^{d_{G \square H}((x,y), (x',y'))} = q^{d_G(x,x')} q^{d_H(y,y')} = Z_G(x,x') Z_H(y,y')$, \\
  $Z_{G \square H} = Z_G \otimes Z_H$ and then $Z_{G \square H}^{-1} = Z_G^{-1} \otimes Z_H^{-1}$. \\
  Thus, 
  $\# G \square H = \tsum(Z_{G \square H}^{-1}) = \tsum(Z_G^{-1} \otimes Z_H^{-1}) = \tsum(Z_G^{-1}) \cdot \tsum(Z_H^{-1}) = \# G \cdot \# H$.\\

  We used the fact that $(P \otimes Q)(R \otimes S) = (PR) \otimes (QS)$ for matrices $P,Q,R, \text{ and } S$ such that the products of $PR$ and $QS$ are defined.
\end{proof}

\begin{example}
  $G = K_2 \square K_3$. \\
  $\# K_2 \square K_3 = \# K_2 \cdot \# K_3 = \frac{2}{1+q} \cdot \frac{3}{1+2q} = \frac{6}{(1+q)(1+2q)} = \# K_{3,3}$.
\end{example}

\begin{remark}
  Here we use the catesian product for graph product, but there are other graph products. However, there is a reason that we use the catesian product. This will be clear in Section 4.
\end{remark}

\begin{proposition}\label{sum_of_magnitude}
  Let $G$ be a graph. Then,
  \[
  \begin{split}
    \# G(q) &= \sum_{k=0}^{\infty} (-1)^k \sum_{x_0 \neq x_1 \neq \cdots \neq x_k} q^{d(x_0, x_1) + d(x_1, x_2) + \dots + d(x_{k-1}, x_k)} \\
    &= \sum_{n=0}^{\infty} c_n q^n,
  \end{split}
  \]
  where 
  \[
    c_n = \sum_{k=0}^{n} (-1)^k |\{ (x_0, \dots, x_k) \mid x_0 \neq x_1 \neq \cdots \neq x_k, d(x_0, x_1) + \dots + d(x_{k-1}, x_k) = n \}|.
  \]
\end{proposition}

\begin{proof}
  Let $\tilde{w}_G:V(G) \rightarrow \ZZ[q]$ be a map defined by 
  \[
    \tilde{w}_G(x) = \sum_{k=0}^{\infty} (-1)^k \sum_{x = x_0 \neq x_1 \neq \cdots \neq x_k} q^{d(x_0, x_1) + d(x_1, x_2) + \dots + d(x_{k-1}, x_k)}.
  \]
  Then, for $x \in V(G)$, 
  \begin{align*}
    & \sum_{y \in V(G)} q^{d(x,y)} \tilde{w}_G(y) \\
    &= \tilde{w}_G(x) + \sum_{y \in V(G) \backslash \{x\}} q^{d(x,y)} \sum_{k=0}^{\infty} (-1)^k \sum_{y = x_0 \neq x_1 \neq \cdots \neq x_k} q^{d(x_0, x_1) + \dots + d(x_{k-1}, x_k)} \\
    &= \tilde{w}_G(x) + \sum_{k=0}^{\infty} (-1)^k \sum_{x \neq y = x_0 \neq x_1 \neq \cdots \neq x_k} q^{d(x,y) + d(x_0, x_1) + \dots + d(x_{k-1}, x_k)} \\
    &= \tilde{w}_G(x) + \sum_{k=0}^{\infty} (-1)^k \sum_{x \neq x_0 \neq x_1 \neq \cdots \neq x_k} q^{d(x, x_0) + d(x_0, x_1) + \dots + d(x_{k-1}, x_k)} \\
    &= \sum_{k=0}^{\infty} (-1)^k \sum_{x = x_0 \neq \cdots \neq x_k} q^{d(x_0, x_1) + \dots + d(x_{k-1}, x_k)} \\
    &\quad + \sum_{k=0}^{\infty} (-1)^k \sum_{x \neq x_0 \neq \cdots \neq x_k} q^{d(x, x_0) + \dots + d(x_{k-1}, x_k)} \\
    &= 1.
\end{align*}

The last equality holds since the first term at $k$ is the second term at $k-1$ in the second term with opposite sign. Now, if $k$ goes to infinity, the term disappers since $q^{\infty} = 0$.
Thus, by \cref{unique property on weighting equation}, we have $\tilde{w}_G = w_G$ and then the first equality of proposition follows.
The second equality immediately follows from the first one.
\end{proof}

\begin{corollary}
  Let $G$ be a graph.
  $|V(G)| = \# G(0), |E(G)| = - \frac{1}{2} \left. \frac{d}{dq} \# G(q) \right|_{q=0}$.
  Here, the derivative is taken in $\ZZ \llbracket q \rrbracket$.
\end{corollary}

\begin{proof}
  From the previous proposition, we have
  \[
    \begin{split}
      c_0 &= \sum_{k=0}^{0}(-1)^k |\{ (x_0, \dots, x_k) \mid x_0 \neq x_1 \neq \cdots \neq x_k, d(x_0, x_1) + \cdots + d(x_{k-1}, x_k) = n \}| \\
      &= |\{ (x_0) \mid x_0 \in V(G) \}| \\
      &= |V(G)|
    \end{split}
  \]
  and
  \[
    \begin{split}
      c_1 &= |\{ (x_0) \mid d(x_0, x_0) = 1 \}| - |\{ (x_0, x_1) \mid x_0 \neq x_1, d(x_0, x_1) = 1 \}| \\
      &= 0 - 2|E(G)| \\
      &= -2|E(G)|.
    \end{split}
  \]
  This corollary immidiately follows from these equations.
\end{proof}

\begin{remark}
  $c_0 \geq 0, c_1 \leq 0, \text{ and } c_2 \geq 0$ holds. The last inequality follows from
  \[ 
    c_2 = |\{ (x,y,z) \mid d(x,y) = d(y,z) = 1 \}| - |\{ (x,y) \mid d(x,y) = 2 \}|
  \]
  by \cref{sum_of_magnitude}. However, in general, the sign of $c_n$ is not determined. For example, if $G$ is the Petersen graph, then $\# G = \frac{10}{1 + 3q + 6q^2} = 10 - 30q + 30q^2 + 90q^3 -450q^4 + \cdots$. By above equation of $c_2$, $c_2 = 0$ if and only if $G$ has no cycles of length $3$ and $4$.
\end{remark}

\begin{remark}\label{Willerton}
  The magnitude does not have the data of the number of connected components.
  For example, let $W$ be the graph obtained by the complete graph $K_6$ with a triangle of edges removed. By easy calculation, 
  \[
    \# W = \frac{6}{1 + 4q}.
  \]

  Since $\# K_5 = \frac{5}{1 + 4q}$, we have $\#5W = \frac{30}{1 + 4q} = \#6K_5$. Here, $nG$ means the disjoint union of $n$ copies of a graph $G$.
\end{remark}

\subsection{Main Results on the Magnitude of Graphs}
This subsection states the inclusion-exclusion principle for the magnitude of graphs under specific conditions. We begin by observing that the magnitude does not generally satisfy the inclusion-exclusion principle. We then introduce sufficient conditions for the principle to hold.
In this document, we mean $G \cup H$ as a graph $(V(G) \cup V(H), E(G) \cup E(H))$.

\begin{definition}
  Let $R$ be a ring. A function $\Phi$ is an \textit{$R$-valued graph invariant} if
  \begin{itemize}
    \item $\Phi(G) \in R$ for any graph $G$.
    \item If $G \approx H$ as a graph, then $\Phi(G) = \Phi(H)$.
  \end{itemize}
\end{definition}

\begin{definition}
  Let $\Phi$ be an $R$-valued graph invariant.
  \begin{enumerate}[label=(\arabic*)]
    \item $\Phi$ is said to be \textit{multiplicative} if
    \begin{itemize}
      \item $\Phi(V_1) = 1$.
      \item $\Phi(G \square H) = \Phi(G) \cdot \Phi(H)$ for any graphs $G$ and $H$.
    \end{itemize}

    \item $\Phi$ is said to satisfy the \textit{inclusion-exclusion principle} if
  \begin{itemize}
    \item $\Phi(V_0) = 0$.
    \item $\Phi(G \cup H) = \Phi(G) + \Phi(H) - \Phi(G \cap H)$ for any graphs $G$ and $H$.
  \end{itemize}
  \end{enumerate}
\end{definition}

\begin{lemma}
  Let $R$ be a ring containing no nonzero nilpotents and let $\Phi$ be a multiplicative $R$-valued graph invariant satisfying the inclusion-exclusion principle. Then, $\Phi(G) = |V(G)|$ for any graph $G$.
\end{lemma}

\begin{proof}
  Now, $\Phi(V_0) = 0$, $\Phi(V_1) = 1$ and by inclusion-exclusion principle, we obtain $\Phi(V_n) = n$ for any $n \geq 0$ by induction. \\
  Let $G$ be any graph and we fix $e \in E(G)$. Let $v_{e}, w_{e}$ be the vertices joined by $e$.
  Consider the two subgraphs $G_e = (V(G), E(G) \backslash \{e\})$ and $H_e = ( \{v_e, w_e\}, \{e\})$ of $G$.
  Then, by inclusion-exclusion principle, we have
  \begin{align*}
    \Phi(G) &= \Phi(G_e) + \Phi(H_e) - \Phi(G_e \cap H_e) \\
    &= \Phi(G_e) + \Phi(K_2) - \Phi(V_2) \\
    &= \Phi(G_e) + \varepsilon.
  \end{align*}
  here, we denote $\varepsilon = \Phi(K_2) - \Phi(V_2)$.
  Repeating this process for all edges of $G$, we have
  $\Phi(G) = \Phi(V_{V(G)}) + \varepsilon \cdot |E(G)| = |V(G)| + \varepsilon \cdot |E(G)|$. \\
  Now, we show that $\varepsilon = 0$.
  Consider the graph $C_4 = K_2 \square K_2$. 
  Now, $\Phi(C_4) = 4 + \varepsilon \cdot 4$ and by multiplicativity, we have
  \begin{align*}
    \Phi(C_4) &= \Phi(K_2) \cdot \Phi(K_2) \\
    &= (\Phi(V_2) + \varepsilon)(\Phi(V_2) + \varepsilon) \\
    &= 4 + 4\varepsilon + \varepsilon^2.
  \end{align*}
  We obtain $\varepsilon^2 = 0$ and then $\varepsilon = 0$ since $R$ contains no nonzero nilpotents.
  Thus, we have $\Phi(G) = |V(G)|$ for any graph $G$.
\end{proof}

The magnitude of graphs is an $\QQ[q]$-valued graph invariant and is multiplicative and $\# V_0 = 0$. Since $\QQ[q]$ has no nonzero nilpotents, we have the following corollary. 

\begin{corollary}
  The magnitude does not satisfy the inclusion-exclusion principle in general.
\end{corollary}


\begin{definition}
  Let $X$ be a graph and let $U$ be a subgraph of $X$.
  $U$ is said to be \textit{convex} in $X$ if for any vertices $x,y \in V(U)$, $d_U(x,y) = d_X(x,y)$.
\end{definition}

\begin{lemma}\label{path_lem}
  Let $X$ be a graph, let $G,H$ be subgraphs of $X$, $g \in V(G)$, and $h \in V(H)$ such that $X = G \cup H$ and there is a path $(g = x_0 \rightarrow x_1 \rightarrow \dots \rightarrow x_n = h)$ in $X$.
  Then, there exists a vertex $x_i \in V(G) \cap V(H)$.
\end{lemma}

\begin{proof}
  We prove by contradiction. Let $i$ be the largest number with $x_i \in V(G)$. If $i = n$, then $x_n \in V(G) \cap V(H)$.
  If $i < n$, $x_{i+1} \notin V(G)$ and $\{x_i, x_{i+1} \} \notin E(G)$, then $\{x_i, x_{i+1}\} \in E(H)$ and $x_i \in V(H)$.
\end{proof}

\begin{lemma}
  Let $X$ be a graph and $G,H$ subgraphs of $X$ such that $X = G \cup H$.
  If $G \cap H$ is convex in $X$, then $G$ and $H$ are also convex in $X$.
\end{lemma}

\begin{proof}
  We prove for $G$. Let $g, g' \in V(G)$. If $d_G(g, g') = \infty$, $d_G(g, g') = \infty = d_X(g, g')$. Assume that $d_X(g, g') < \infty$ and let $n = d_X(g, g')$. We can choose a shortest path $(g = x_0 \rightarrow x_1 \rightarrow \dots \rightarrow x_n = g')$ in $X$ such that it contains the most vertices in $G$. Suppose there exists a vertex $x_j \notin V(G)$ in this path. By \cref{path_lem}, there exist vertices $x_i, x_k \in V(G) \cap V(H)$ such that $0 \leq i < j < k \leq n$. Since $G \cap H$ is convex in $X$, there exists a shortest path $(x_i = y_0 \rightarrow y_1 \rightarrow \dots \rightarrow y_m = x_k)$ in $G \cap H$. Now, we obtain a path $(g = x_0 \rightarrow \dots \rightarrow x_i = y_0 \rightarrow y_1 \rightarrow \dots \rightarrow y_m = x_k \rightarrow \dots \rightarrow x_n = g')$ in $X$ which contains more vertices in $G$ than the previous path. This is a contradiction. Thus, all vertices in the chosen path are contained in $V(G)$ and then $d_G(g, g') = d_X(g, g')$.
\end{proof}

\begin{definition}
  Let $X$ be a graph and let $U$ be a subgraph of $X$ such that $U$ is convex in $X$. We denote $V_U(X) = \{ v \in V(X) \mid d_X(v,u) < \infty \text{ for some } u \in V(U) \}$.
  Then, we say that \textit{$X$ projects to $U$} if for any $x \in V_U(X)$, there exists $\pi(x) \in V(U)$ such that for any $u \in V(U)$, $d_X(x,u) = d_X(x, \pi(x)) + d_X(\pi(x),u)$.
\end{definition}

\begin{lemma}
  If $X$ projects to $U$, then $\pi(x)$ is uniquely determined for any $x \in V_U(X)$.
\end{lemma}

\begin{proof}
  Let $u_1, u_2 \in V(U)$ be a vertices such that for any $u \in V(U)$, 
  \begin{align*}
    d_X(x,u) &= d_X(x, u_1) + d_X(u_1, u) \\
    d_X(x,u)&= d_X(x, u_2) + d_X(u_2, u).
  \end{align*}
  Then,
  \begin{align*}
    d_X(x, u_1) = d_X(x, u_2) + d_X(u_1, u_2) \\
    d_X(x, u_2) = d_X(x, u_1) + d_X(u_2, u_1)
  \end{align*}
  and we obtain $d_X(u_1, u_2) = 0$. Thus, $u_1 = u_2$.
\end{proof}

\begin{example}
  aaa
\end{example}

\begin{lemma}
  Let $X$ be a graph and let $U$ be a convex subgraph of $X$ such that $X$ projects to $U$.
  Then, for any $u \in V(U)$, 
  \[
    w_U(u) = \sum_{x \in \pi^{-1}(u)}q^{d_X(u, x)}w_X(x).
  \]
\end{lemma}

\begin{proof}
  Let $\tilde{w}_U(u) = \sum_{x \in \pi^{-1}(u)}q^{d_X(u, x)}w_X(x)$ for $u \in V(U)$.
  Then,
  \begin{align*}
    & \sum_{v \in V(U)} q^{d_U(u,v)} \tilde{w}_U(v) \\
    &= \sum_{v \in V(U)} q^{d_X(u,v)} \sum_{x \in \pi^{-1}(v)} q^{d_X(v,x)} w_X(x) \quad (\text{ since } U \text{ is convex in } X.) \\
    &= \sum_{v \in V(U)} \sum_{x \in \pi^{-1}(v)} q^{d_X(u, x)w_X(x)} \quad (\text{ since } X \text{ projects to } U.) \\
    &= \sum_{x \in V(X)} q^{d_X(u,x)} w_X(x) \\
    &= 1.
  \end{align*}
\end{proof}

\begin{theorem}[Main Theorem I]\label{incl-excl}
  Let $X$ be a graph and let $G,H$ be subgraphs of $X$ such that $X = G \cup H$.
  If $G \cap H$ is convex in $X$ and $H$ projects to $G \cap H$, then
  \[
    \# X = \# G + \# H - \#(G \cap H).
  \]
\end{theorem}

Before proving this theorem, we give the example of graphs for which we can apply this theorem.

\begin{example}
  Let  $G$ be a graph and consider the graph $H$ formed by identifying one of the edges of a cycle graph $C_n$ with an edge of $G$. Now, let $n \geq  4$. 

  \figgraph{connect_C_4.pdf}{Cycle graph of four vertices}{example_connect_C_4}

  Then, we can apply \cref{incl-excl} to $X = G \cup H$ as follows:
  \[
    \# X = \# G + \# C_n - \# K_2.
  \]
  Similarly, if $G$ and $H$ are graphs and $G \vee H$ is the graph formed by identifying one vertex of $G$ with one vertex of $H$, then we have
  \[
    \#(G \vee H) = \# G + \# H - 1.
  \]
\end{example}


\begin{proof}[Proof of \cref{incl-excl}]
  We show that $w_X = w_G + w_H - w_{G \cap H}$. Now, $w_G, w_H$, and $w_{G \cap H}$ is defined on $V(X)$ by extending $0$ to the outside of each graph.
\end{proof}

\begin{example}
  The three graphs below are divided into a graph $C_3$, and two graphs $C_2$, so they all have the same magnitude and can be calculated as follows:
  \[
    \# G = \# C_3 + 2 \cdot \# C_2 - 2.
  \]
\end{example}

\begin{example}
  If $G$ is a forest, then we can calculate the magnitude of $G$ as follows:
  \[
    \# G = |V(G)| - 2|E(G)| \frac{q}{1+q}.
  \]

  If $G$ is a tree, then
  \[
    \# G = |V(G)| - 2(|V(G)| - 1) \frac{q}{1+q}.
  \]
\end{example}

Furthermore examples.

\begin{remark}
  Even though two graphs both have one component and the same magnitude, they may not be isomorphic.
  We can easily generate such examples using wedge sums of graphs as follows.

  続きを書く
\end{remark}

\newpage
\section{The Magnitude Homology of Graphs}
In this section, we define the magnitude homology of a graph $G$. We provide fundamental examples and properties, and state the Mayer-Vietoris sequence for magnitude homology.

\subsection{The Definition of The Magnitude Homology of Graphs}
\begin{definition}
  Let $G$ be a graph. For a positive integer $k$, the \textit{length} of a tuple $(x_0, \dots, x_k)$ of $V(G)$ is defined to be
  \[
    \begin{split}
      l(x_0, \dots, x_k) &= d(x_0, x_1) + d(x_1, x_2) + \cdots + d(x_{k-1}, x_k) \\
      &= \sum_{i=1}^{k} d(x_{i-1}, x_i).
    \end{split}
  \]
  Now, let $l(x_0) = 0$.
  We say a tuple $(x_0, \dots, x_k)$ is \textit{good} if $x_0 \neq x_1 \neq \cdots \neq x_k$.
\end{definition}

\begin{lemma}[Triangle inequality]
  If $(x_0, \dots, x_k)$ is a good tuple of $V(G)$, then for any $1 \leq i \leq k-1$,
  \[
    l(x_0, \dots, x_k) \geq l(x_0, \dots, \hat{x_i}, \dots, x_k).
  \]
\end{lemma}

\begin{proof}
  We obviously have the statement by the triangle inequality of the distance function $d$.
\end{proof}

\begin{definition}[\textit{Magnitude chain complex}]
  Let $G$ be a graph.
  $MC_{*,*}(G)$ is the \textit{magnitude complex} defined as follows:
  \[
    MC_{*,*}(G) = \bigoplus_{l=0}^{\infty} MC_{*, l}(G).
  \]
  For non-negative integers $k$ and $l$, $MC_{k,l}(G)$ is freely generated by good tuples $(x_0, \dots, x_k)$ of $V(G)$ of length $l$ with the ring $\ZZ$.
  The differential $\partial : MC_{k,l}(G) \rightarrow MC_{k-1,l}(G)$ is defined by
  \[
    \partial = \sum_{i=1}^{k-1} (-1)^{i-1} \partial_i,
  \]
  where 
  \[
    \partial_i (x_0, \dots, x_k) = \begin{cases}
      (x_0, \dots, \hat{x_i}, \dots, x_k) & \text{if } l(x_0, \dots, \hat{x_i}, \dots, x_k) = l(x_0, \dots, x_k). \\
      0 & \text{otherwise}.
    \end{cases}
  \]
\end{definition}

\begin{remark}For a good tuple $(x_0, \dots, x_k)$ and $1 \leq i \leq k-1$,
  \[
    \partial_i(x_0, \dots, x_k) \neq 0 \iff d(x_{i-1}, x_i) + d(x_i, x_{i+1}) = d(x_{i-1}, x_{i+1}).
  \]  
\end{remark}

\begin{lemma}
  $\partial \circ \partial = 0$.
\end{lemma}

\begin{proof}
  aaa.
\end{proof}

\begin{definition}(\textit{magnitude homology})
  Let $G$ be a graph.
  The \textit{magnitude homology} $MH_{*,*}(G)$ of $G$ is the homology of the magnitude chain complex $MC_{*,*}(G)$, that is,
  \[
    MH_{k,l}(G) = \Ker \partial \cap (MC_{k,l}(G))  / \im \partial \cap (MC_{k,l}(G)).
  \]
\end{definition}

\begin{example}
  \begin{enumerate}[label=(\roman*)]
    \item $G = V_n$. Then,
    \[
      MC_{k,l}(V_n) = \begin{cases}
        \ZZ\{(x) \mid x \in V(V_n) \} &  \text{if } k=l=0. \\
        0 & \text{otherwise}.
      \end{cases}
    \]
    $\partial = 0$ implies that
    \[
      MH_{k,l}(V_n) \approx \begin{cases}
        \ZZ^n & \text{if } k=l=0. \\
        0 & \text{otherwise}.
      \end{cases}
    \]
    \item $G = K_n (n \geq 2)$. Then, $l(x_0, \dots, x_k) = k$ for any good tuple $(x_0, \dots, x_k)$ of $V(K_n)$. Thus,
    \[
      MC_{k,l}(K_n) = \begin{cases}
        \ZZ\{(x_0, \dots, x_k) \mid x_0 \neq x_1 \neq \cdots \neq x_k \} & \text{if } l=k. \\
        0 & \text{otherwise}.
      \end{cases}
    \]
    $\partial = 0$ implies that
    \[
      MH_{k,l}(K_n) \approx \begin{cases}
        \ZZ^{n(n-1)^l} & \text{if } l=k. \\
        0 & \text{otherwise}.
      \end{cases}
    \]
    \item $G = C_5$. Number the vertices of $C_5$ as shown in the following figure. \\
    ここにナンバリングした$C_5$の図を挿入 \\
    Let us consider $MH_{2,3}(C_5)$.
    続く
  \end{enumerate}
\end{example}

\begin{theorem}\label{categorifying}
  Let $G$ be a graph. Then, 
  \[
    \sum_{k,l \geq 0} (-1)^k \rank (MH_{k,l}(G)) q^l = \# G ~ \text{in} ~  \ZZ \llbracket q \rrbracket.
  \] 
\end{theorem}

\begin{proof}
  \[
  \begin{split}
    (LHS) &= \sum_{l \geq 0} \chi(MH_{*,l}(G)) q^l \\
    &= \sum_{l \geq 0} \chi(MC_{*,l}(G))q^l \\
    &= \sum_{k,l \geq 0} (-1)^k \rank(MC_{k,l}(G))q^l \\
    &= \sum_{k \geq 0} (-1)^k \sum_{x_0 \neq \cdots \neq x_k} q^{d(x_0, x_1) + \cdots + d(x_{k-1}, x_k)} \\
    &= \# G.
  \end{split}
  \]
  The last equation is obtained by \cref{sum_of_magnitude}.
\end{proof}

\begin{proposition}
  Let $G$ be a graph. Then,
  \begin{itemize}
    \item $MH_{0,0}(G) \approx \ZZ^{|V(G)|}$ holds.
    \item $MH_{1,1}(G) \approx \ZZ^{2|E(G)|}$ holds.
  \end{itemize}
\end{proposition}

\begin{proof}
  \[
      MC_{k,0}(G) = \begin{cases}
        \ZZ\{(x) \mid x \in V(G) \} & \text{if } k=0. \\
        0 & \text{otherwise}.
      \end{cases}
  \]
  and $\partial = 0$ induces the first equation.
  \[
      MC_{k,1}(G) = \begin{cases}
        \ZZ\{(x_0, x_1) \mid x_0 \neq x_1 \} & \text{if } k=1. \\
        0 & \text{otherwise}.
      \end{cases}
    \]
  and $\partial = 0$ induces the second equation.
\end{proof}

\begin{definition}
  The diameter $d$ of a graph $G$ is defined by
  \[
    d = \max \{ d(x,y) \mid x,y \in V(G) \text{ and } x,y \text{ lie in the same component of } G \}.
  \]
  If $G = V_n$, then we define $d=0$.
  Then, for any graph $G$, $0 \leq d < \infty$ holds.

\end{definition}

\begin{proposition}
  Let $G$ be a graph and let $d$ be the diameter of $G$ and assume that $MH_{k,l}(G) \neq 0$ for given non-negative integers $k$ and $l$.
  Then,
  \begin{itemize}
    \item $\frac{l}{d} \leq k \leq l$ holds.
    \item If $d > 1 \text{ and } l > 0 \text{, then } \frac{l}{d} < k \leq l$ holds.
  \end{itemize}
\end{proposition}

\begin{proof}
  Since $MH_{k,l}(G) \neq 0$, there exists a good tuple $(x_0, \dots, x_k)$ of length $l$ such that $\partial (x_0, \dots, x_k) = 0$.
  Thus, $l = l(x_0, \dots, x_k) = \sum_{i=1}^{k} d(x_{i-1}, x_i) \leq \sum_{i=1}^{k} d = kd$ and $l = \sum_{i=1}^{k} d(x_{i-1}, x_i) \geq k$.
  This implies that $\frac{l}{d} \leq k \leq l$.
  
  Now, assume that $d > 1$ and $l > 0$ and suppose that $k = \frac{l}{d}$.
  From the above discussion, we have $d(x_i, x_{i+1}) = d$ for all $i$. $\partial(x_0, \dots, x_k) = 0$. For the $(k+1)$-tuple $\partial(x_0, \dots, x_k)$ is a linear combination of at most $k-1$ distinct terms of $k$-tuples, so $\partial(x_0, \dots, x_k) = 0$ implies $d(x_{i-1}, x_i) + d(x_i, x_{i+1}) \neq d(x_{i-1}, x_{i+1})$ for all $1 \leq i \leq k-1$.
  Since $d(x_0, x_1) = d \geq 2$, there exists a vertex $y$ such that $d(x_0, y) + d(y, x_1) = d(x_0, x_1)$ and $y \neq x_0, x_1$.
  Then, $(x_0, y, x_1, \dots, x_k)$ is a good tuple in $MC_{k+1, l}(G)$ and \[
    \partial_i(x_0, y, x_1, \dots, x_k) =
    \begin{cases}
      (x_0, x_1, \dots, x_k) & \text{for } i=1. \\
      0 & \text{for } 2 \leq i \leq k.
    \end{cases}
  \]
  It is obvious for $3 \leq i$ by $d(x_{i-1}, x_i) + d(x_i, x_{i+1}) \neq d(x_{i-1}, x_{i+1})$ and is also true for $i=2$ since $d(y, x_1) + d(x_1, x_2) = d(y, x_1) + d > d \geq d(y, x_2)$. This implies $MH_{k,l}(G) = 0$ and contradicts the assumption.
\end{proof}

\subsection{Induced Maps on Magnitude Homology}
\begin{definition}
  Let $G$ and $H$ be graphs.
  A map $f : V(G) \rightarrow V(H)$ is said to be a \textit{graph map} if for any $\{x,y\} \in E(G)$, either $f(x) = f(y)$ or $\{f(x), f(y)\} \in E(H)$.
\end{definition}

We note that a graph map is distinguished from a graph homomorphism, which requires that $\{f(x), f(y)\} \in E(H)$ for any $\{x,y\} \in E(G)$.

\begin{proposition}\label{f_inequality}
  $l(f(x_0), \dots, f(x_k)) \leq l(x_0, \dots, x_k)$ for any good tuple $(x_0, \dots, x_k)$ of $V(G)$.
\end{proposition}

\begin{proof}
  For any vertices $x,y \in V(G)$, $d_H(f(x), f(y)) \leq d_G(x,y)$ holds. Indeed, if $x,y$ lie in the same component of $G$, then there exists a path $(x = x_0 \rightarrow x_1 \rightarrow \cdots \rightarrow x_n = y)$ in $G$ such that $n = d_G(x,y)$.
  Since $f$ is a graph map, either $f(x_{i-1}) = f(x_i)$ or $\{f(x_{i-1}), f(x_i)\} \in E(H)$ for any $1 \leq i \leq n$.
  Thus, $(f(x) = f(x_0) \rightarrow f(x_1) \rightarrow \cdots \rightarrow f(x_n) = f(y))$ is a path in $H$ and then $d_H(f(x), f(y)) \leq n = d_G(x,y)$.
  If $x,y$ do not lie in the same component, then $d_G(x,y) = d_H(f(x), f(y)) = \infty$. Then,
  \[
    \begin{split}
      l(f(x_0), \dots, f(x_k)) &= \sum_{i=1}^{k} d_H(f(x_{i-1}), f(x_i)) \\
      &\leq \sum_{i=1}^{k} d_G(x_{i-1}, x_i) \\
      &= l(x_0, \dots, x_k).
    \end{split}
  \]
\end{proof}

\begin{definition}
  Let $G$ and $H$ be graphs and let $f : V(G) \rightarrow V(H)$ be a graph map.
  Then, the \textit{induced map} $f_{\#} : MC_{*,*}(G) \rightarrow MC_{*,*}(H)$ is defined by
  \[
    f_{\#}(x_0, \dots, x_k) = \begin{cases}
      (f(x_0), \dots, f(x_k)) & \text{if } l(f(x_0), \dots, f(x_k)) = l(x_0, \dots, x_k). \\
      0 & \text{otherwise}.
    \end{cases}
  \]
  for any good tuple $(x_0, \dots, x_k)$ of $V(G)$.
\end{definition}

\begin{proposition}
  The induced map $f_{\#} : MC_{*,*}(G) \rightarrow MC_{*,*}(H)$ is a chain map.
\end{proposition}

\begin{proof}
  aaa.
\end{proof}

\begin{definition}(Induced maps in homoplogy)
  If $f : G \rightarrow H$ is a graph map, the \textit{induced map in homology} $f_* : MH_{*,*}(G) \rightarrow MH_{*,*}(H)$ is the map induced by the chain map $f_{\#} : MC_{*,*}(G) \rightarrow MC_{*,*}(H)$.
\end{definition}

\begin{definition}
  $A$ is called a \textit{bigraded abelian group} if $A = \bigoplus_{k,l \geq 0} A_{k,l}$ where each $A_{k,l}$ is an abelian group.
  A \textit{bigraded homomorphism} $f : A \rightarrow B$ between bigraded abelian groups $A$ and $B$ is a homomorphism such that $f(A_{k,l}) \subset B_{k,l}$ for any $k,l \geq 0$.
\end{definition}

\begin{proposition}
  The assignment $G \mapsto MH_{*,*}(G)$ and $f \mapsto f_*$ defines a functor from the category of graphs and graph maps to the category of bigraded abelian groups and bigraded homomorphisms, denoting by $\mathbf{Graph} \rightarrow \mathbf{BAb}$.
\end{proposition}

\begin{proposition}
  Let $f:G \rightarrow H$ be a graph map.
  \begin{itemize}
    \item $f_* : MH_{0,0}(G) \rightarrow MH_{0,0}(H)$ is given by $f_*(x) = f(x)$ for any $x \in V(G)$.
    \item $f_* : MH_{1,1}(G) \rightarrow MH_{1,1}(H)$ is given by
    \[
      f_*(x_0, x_1) = \begin{cases}
        (f(x_0), f(x_1)) & \text{ if } f(x_0) \neq f(x_1). \\
        0 & \text{otherwise}.
      \end{cases}
    \]
    for any $(x_0, x_1) \in MH_{1,1}(G)$.
  \end{itemize}
\end{proposition}

\begin{proof}
  The first equation is obvious. \\
  For the second equation, we obtain by definition;
  \[
    f_*(x_0, x_1) = \begin{cases}
      (f(x_0), f(x_1)) & \text{if } l(f(x_0), f(x_1)) = l(x_0, x_1) = 1.\\
      0 & \text{otherwise}.
    \end{cases}
  \]
  for any $(x_0, x_1) \in MH_{1,1}(G)$. Since $f$ is a graph map, $l(f(x_0), f(x_1)) = 1$ if and only if $f(x_0) \neq f(x_1)$.
\end{proof}

\begin{corollary}
  Let $f : G \rightarrow H$ be a graph map.
  $f_*$ is an isomorphism if and only if $f$ is a graph isomorphism.
\end{corollary}

\begin{proof}
  aaa.
\end{proof}


\subsection{Magnitude Homology of Disjoint Union of Graphs}
\begin{proposition}\label{magnitude_of_disjoint_union}
  Let $G$ and $H$ be graphs.
  We define the inclusion graph maps $i : G \rightarrow G \bigsqcup H, j : H \rightarrow G \bigsqcup H$. Then,
  \[
    i_* \oplus j_* : MH_{*,*}(G) \oplus MH_{*,*}(H) \rightarrow MH_{*,*}(G \bigsqcup H)
  \]
  is an isomorphism for each $k,l \geq 0$.
\end{proposition}

\begin{proof}
  saaa.
\end{proof}

We can give another proof of \cref{disjoint_union} by \cref{magnitude_of_disjoint_union} and $\chi(A_* \oplus B_*) = \chi(A_*) + \chi(B_*)$.




\subsection{Magnitude Homology of Cartesian Products}
\begin{definition}This definition is not true.
  Fix $l \geq 0$. The \textit{exterior product} is the map
  \[
    \square : MC_{*,*}(G) \otimes MC_{*,*}(H) \rightarrow MC_{*,*}(G \square H)
  \]
  is defined as follows. Let $\square$ be the map
  \[
    \square : MC_{k_1, l_1}(G) \times MC_{k_2, l_2}(H) \rightarrow MC_{k, l}(G \square H) \text{ for } k_1, k_2 \geq 0, k = k_1 + k_2, l = l_1 + l_2,
  \]
  which is defined by
  \[
    \square((x_0, \dots, x_{k_1}), (y_0, \dots, y_{k_2})) = \sum_{\sigma} \sign(\sigma) ((x_{i_0}, y_{j_0}), (x_{i_1}, y_{j_1}), \dots, (x_{i_k}, y_{j_k})),
  \]
  where the sum is over all shuffles $\sigma$ of type $(k_1, k_2)$, that is, all sequences
  \[    
    ((i_0, j_0), (i_1, j_1), \dots, (i_k, j_k))
  \]
  such that
  \[
    i_0 = 0, j_0 = 0, 0 \leq i_r \leq k_1, 0 \leq j_r \leq k_2 \text{ for } 0 \leq r \leq k, \text{ and }
  \]

  \[
    (i_{r+1}, j_{r+1}) = \begin{cases}
      (i_r + 1, j_r) & \text{or} \\
      (i_r, j_r + 1) & \text{ for } 0 \leq r < k,
    \end{cases}
  \]
  and 
  \[
    \sign(\sigma) = (-1)^m,
  \]
  where $m = \# \{ (i,j) \in \{ \{0, \dots, k_1\} \times \{0, \dots, k_2\} \} \mid i = i_r \Rightarrow j < j_r \}$.

  Here, we extend the map $\square$ bilinearly to the tensor product \\
  \[
    MC_{k_1, l_1}(G) \otimes MC_{k_2, l_2}(H) \rightarrow MC_{k, l}(G \square H)
  \]. 
  
  We denote this induced map also by $\square$ and call it the \textit{exterior product}.
\end{definition}

\begin{example}
  Let $G = C_2 \square C_2 = C_4$ \\
  \figgraph{C_2_square.pdf}{Square graph}{example_square_graph} \\
  Consider the exterior product $\square((x_0, x_1) \otimes (y_0, y_1))$.
  We have the two shuffles of type $(1,1)$:
  \[
    ((0,0), (1,0), (1,1)), ~ ((0,0), (0,1), (1,1)).
  \]
  Thus,
  \[
    \begin{split}
      \square((x_0, x_1) \otimes (y_0, y_1)) &= - ((x_0, y_0), (x_1, y_0), (x_1, y_1)) + ((x_0, y_0), (x_0, y_1), (x_1, y_1)).
    \end{split}
  \]
\end{example}

\begin{remark}
  As you see in the above example, the number of shuffles is $\binom{k}{k_1}$.
\end{remark}

\begin{proposition}
  The exterior product $\square : MC_{*,*}(G) \otimes MC_{*,*}(H) \rightarrow MC_{*,*}(G \square H)$ is a chain map.
\end{proposition}

\begin{proof}
  Let $\bf{x} = (x_0, \dots, x_{k_1}), \bf{y} = (y_0, \dots, y_{k_2})$.
  Now, we show that 
  \[
    \partial \circ \square(\bf{x} \otimes \bf{y}) = \square((\partial \bf{x}) \otimes \bf{y}) + (-1)^{k_1} \square (\bf{x} \otimes (\partial \bf{y})) = \square \circ (\partial \otimes \partial) (\bf{x} \otimes \bf{y}).
  \]
  Here, we should consider the sequence of tensor products of the magnitude chain complexes defined by
  \begin{align*}
    \partial \otimes \partial : MC_{k_1, l_1}(G) \otimes MC_{k_2, l_2}(H) 
    &\rightarrow 
    (MC_{k_1-1, l_1}(G) \otimes MC_{k_2, l_2}(H)) \\
    &\quad \oplus (MC_{k_1, l_1}(G) \otimes MC_{k_2-1, l_2}(H)), \\
    (\partial \otimes \partial) (\mathbf{x} \otimes \mathbf{y}) 
    &= (\partial \mathbf{x}) \otimes \mathbf{y} + (-1)^{k_1} \mathbf{x} \otimes (\partial \mathbf{y}).
  \end{align*}
  Then, we should show only the first equality. \\
  ここに可換図式を挿入. 証明も続く
\end{proof}


From this proposition, we obtain the induced map in homology, also denoting $\square$.

\begin{definition}(Tor functor)
  Let $R$ be a ring and let $A, B$ be $R$-modules.
  Then, $\tor(A,B)$ is defined by the derived functor of the tensor product.  
\end{definition}

\begin{theorem}
  Let $G$ and $H$ be graphs.
  \[
    0 \rightarrow MH_{*,*}(G) \otimes MH_{*,*}(H) \xrightarrow{\square} MH_{*,*}(G \square H) \rightarrow \tor(MH_{*-1,*}(G), MH_{*,*}(H)) \rightarrow 0
  \]
  is a short exact sequence and non-naturally split.
  In particular, if $MH_{*,*}(G)$ or $MH_{*,*}(H)$ is torsion-free, then the exterior product $\square$ is an isomorphism.
\end{theorem}

We don't prove this theorem in this thesis.

\begin{example}
  $G = C_4 = C_2 \square C_2$.
\end{example}



\subsection{The Mayer-Vietoris Sequence of Magnitude Homology of Graphs}
\begin{definition}
  Let $X$ be a graph and let $G,H$ be subgraphs of $X$.
  \begin{enumerate}[label=(\arabic*)]
    \item $(X;G,H)$ is said to be a \textit{projecting decomposition} if $X = G \cup H$, $G \cap H$ is convex in $X$ and $H$ projects to $G \cap H$. \\ 
    We write $i^G : G \rightarrow X$, $i^H : H \rightarrow X$, $j^G : G \cap H \rightarrow G$, $j^H : G \cap H \rightarrow H$ for the inclusion graph maps.

    \item Let $(X;G,H), (X';G',H')$ be projecting decompositions. $f : (X;G,H) \rightarrow (X';G',H')$ is said to be a \textit{decomposition map} if $f : X \rightarrow X'$ is a graph map such that $f(V(G)) \subset V(G')$ and $f(V(H)) \subset V(H')$.
    \item Let $f : (X;G,H) \rightarrow (X';G',H')$ be a decomposition map.
    Then, $f$ is said to be a \textit{projecting decomposition map} if $V_{G \cap H}(H) = f^{-1}(V_{G' \cap H'}(H'))$ and $f(\pi(h)) = \pi(f(h))$ for any $h \in V_{G \cap H}(H)$.
    \item Let $(X;G,H)$ be a projecting decomposition. $MC_{*,*}(G,H)$ denote the subcomplex of $MC_{*,*}(X)$ spanned by good tuples $(x_0, \dots, x_k)$ whose entries all lie in $G$ or all lie in $H$.
  \end{enumerate}
\end{definition}


\begin{theorem}
  Let $(X;G,H)$ be a projecting decomposition.
  Then, the inclusion map
  \[
    MC_{*,l}(G,H) \hookrightarrow MC_{*,l}(X)
  \]
  is a quasi-isomorphism for any $l \geq 0$.
\end{theorem}

\begin{proof}
  aaa.
\end{proof}

\begin{theorem}\label{Mayer-Vietoris}(the main theorem II)
  Let $(X;G,H)$ be a projecting decomposition.
  Then,
  \[
    0 \rightarrow MH_{*,*}(G \cap H) \xrightarrow{(j^G_*, -j^H_*)} MH_{*,*}(G) \oplus MH_{*,*}(H) \xrightarrow{i^G_* \oplus i^H_*} MH_{*,*}(X) \rightarrow 0
  \]
  is a split short exact sequence.
\end{theorem}

\begin{proof}
  aaa.
\end{proof}


\begin{corollary}
  Let $(X;G,H)$ be a projecting decomposition.
  Then,
  \[
    \# X = \# G + \# H - \# (G \cap H)
  \]
  in $\ZZ[[q]]$.
\end{corollary}

\begin{proof}
  By Theorem \ref{Mayer-Vietoris}, 
  \begin{align*}
    &\chi(MH_{*,l}(G \cap H)) - \chi((MH_{*,l}(G)) \oplus \chi(MH_{*,l}(H))) + \chi(MH_{*,l}(X)) = 0 \text{ holds and then } \\
     &\chi(MH_{*,l}(X)) = \chi(MH_{*,l}(G)) + \chi(MH_{*,l}(H)) - \chi(MH_{*,l}(G \cap H)).
  \end{align*}

  For each $l \geq 0$, multiplying by $q^l$ and summing over all $l \geq 0$, we have
  \[
    \sum_{l \geq 0} \chi(MH_{*,l}(X)) q^l = \sum_{l \geq 0} \chi(MH_{*,l}(G)) q^l + \sum_{l \geq 0} \chi(MH_{*,l}(H)) q^l - \sum_{l \geq 0} \chi(MH_{*,l}(G \cap H)) q^l.
  \]
  By \cref{categorifying}, we obtain the desired equation.
\end{proof}

\begin{corollary}
  Let $T$ be a tree.
\end{corollary}


\subsection{Diagonal Graphs and its Property}
\begin{definition}
  A graph $G$ is said to be \textit{diagonal} if $MH_{k,l}(G) = 0$ for $k \neq l$.
\end{definition}

\begin{lemma}
  Any trees are diagonal.
\end{lemma}

\begin{proof}
  aaa
\end{proof}

\begin{proposition}
  For a diagonal graph, the magnitude completely determines the magnitude homology ranks.
\end{proposition}

\begin{proof}
  Obvious by \cref{categorifying}.
\end{proof}


\newpage
\section{Motivation: The Magnitude of Enriched Categories}
In this section, we explain the motivation for studying the magnitude of graphs in a broader context. We employ the notion of enriched categories to define the magnitude.

\subsection{The Magnitude of a Matrix}
\begin{definition}
  Let $k$ be a set and let $+, \cdot $ be binary operations on $k$, and let $0_k, 1_k$ be elements of $k$.
  Then, $(k, +, \cdot, 0_k, 1_k)$ is called a \textit{rig} if the following conditions hold:
  \begin{enumerate}[label=(\arabic*)]
    \item $(k, +, 0_k)$ is a commutative monoid.
    \item $(k, \cdot, 1_k)$ is a monoid.
    \item multiplication distributes over addition, that is, for any $a,b,c \in k$,
    \[
      a \cdot (b + c) = a \cdot b + a \cdot c, ~ (a + b) \cdot c = a \cdot c + b \cdot c.
    \]
  \end{enumerate}
  Now, we mean a rig as a commutative rig with the operation $\cdot$.
\end{definition}

\begin{example}
  $(\ZZ_{\geq 0}, +, \cdot, 0, 1)$ is a rig.
\end{example}

\begin{definition}
  Let $k$ be a rig and let $I, J$ be finite sets.
  An $I \times J$-matrix is a function $\zeta : I \times J \rightarrow k$.
\end{definition}

\begin{definition}
  Let $k$ be a rig, and let $I, J, \text{ and } L$ be finite sets.
  \begin{enumerate}[label=(\arabic*)]
    \item If $\zeta_1$ is an $I \times J$-matrix and $\zeta_2$ is a $J \times L$-matrix, then the product $\zeta_1 \zeta_2$ is defined as follows:
    \[
      (\zeta_1 \zeta_2)(i,l) = \sum_{j \in J} \zeta_1(i,j) \cdot \zeta_2(j,l) \quad (i \in I, l \in L)
    \]

    \item $\delta : I \times I \rightarrow k$ is called the \textit{identity matrix} if $\delta(i,j) = 1_k$ when $i=j$ and $\delta(i,j) = 0_k$ when $i \neq j$.
    
    \item Let $\zeta : I \times J \rightarrow k$ be a matrix. We define $\zeta^* : J \times I \rightarrow k$ by $\zeta^*(j,i) = \zeta(i,j)$.
    
    \item Let $\zeta$ be an $I \times I$-matrix. If there exists an $I \times I$-matrix $\zeta^{-1}$ such that $\zeta \zeta^{-1} = \delta$ and $\zeta^{-1} \zeta = \delta$, then $\zeta$ is said to be \textit{invertible} and $\zeta^{-1}$ is called the \textit{inverse} of $\zeta$.
    
    \item $w : I \rightarrow k$ is called a \textit{vector}. If $\zeta$ is an $I \times J$-matrix, $v$ is a $I$-vector, and $w$ is a $J$-vector, then the products $\zeta w : I \rightarrow k$ and $v \zeta : J \rightarrow k$ are defined by
    \[
      (\zeta w)(i) = \sum_{j \in J} \zeta(i,j) \cdot w(j) \quad (i \in I)
    \]
    \[
      (v \zeta)(j) = \sum_{i \in I} v(i) \cdot \zeta(i,j) \quad (j \in J)
    \]
    Now, $\zeta w$ is an $I$-vector and $v \zeta$ is a $J$-vector.

    \item If $w, v$ are $I$-vectors, then the \textit{inner product} $v w$ is defined by
    \[
      v w = \sum_{i \in I} v(i) \cdot w(i)
    \]

    \item Let $u_I$ be the $I$-vector defined by $u(i) = 1_k$ for any $i \in I$.
  \end{enumerate}
\end{definition}


\begin{definition}
  Let $\zeta$ be an $I \times I$-matrix over a rig $k$.
  \begin{itemize}
    \item A \textit{weighting} on $\zeta$ is a vector $w : J \rightarrow k$ such that $\zeta w = u_I$.
    $w(j)$ is called the \textit{weight} of $j \in J$.
    \item A \textit{coweighting} on $\zeta$ is a vector $v : I \rightarrow k$ such that $v \zeta = u_I^*$. $v(i)$ is called the \textit{coweight} of $i \in I$.
  \end{itemize}
\end{definition}

\begin{example}
  Let $G$ be a graph.
  Then, $Z_G(q)$ is a $V(G) \times V(G)$-matrix over the rig $\QQ \llbracket q \rrbracket$ and the weighting on $Z_G(q)$ is the weighting on $G$ defined in Section 2.1.
\end{example}

\begin{lemma}\label{sum_of_w.c.}
  Let $\zeta$ be an $I \times I$-matrix over a rig $k$.
  If $\zeta$ has a weighting $w$ and a coweighting $v$, then
  \[
    \sum_{i \in I} v(i) = \sum_{j \in J} w(j)
  \]
\end{lemma}

\begin{proof}
  \[
    \begin{split}
      \sum_{i \in I} v(i) &= v u_I \\
      &= v (\zeta w) \\
      &= (v \zeta) w \\
      &= u_J w \\
      &= \sum_{j \in J} w(j)
    \end{split}
  \]
\end{proof}

From this lemma, the sum of the weighting or coweighting on $\zeta$ is unique if they exist. Therefore, we can define the magnitude of $\zeta$ as follows:

\begin{definition}
  Let $\zeta$ be an $I \times J$-matrix over a rig $k$.
  If $\zeta$ has a weighting and a coweighting, then the \textit{magnitude} of $\zeta$ is defined to be
  \[
    \# \zeta = \sum_{i \in I} v(i) = \sum_{j \in J} w(j),
  \]
  where $w$ is the weighting on $\zeta$ and $v$ is the coweighting on $\zeta$.
\end{definition}

\begin{lemma}
  Let $\zeta$ be an $I \times I$-matrix over a rig $k$.
  \begin{enumerate}[label=(\arabic*)]
    \item If $\zeta$ is invertible, then $\zeta$ has the magnitude.
    \item If $k$ is a field and $\zeta$ has the magnitude, then $\zeta$ is invertible.
  \end{enumerate}
\end{lemma}

\begin{proof}
  (1) If $\zeta$ is invertible, then $w = \zeta^{-1} u_I$ and $v = u_I \zeta^{-1}$ obviously satisfy the definition of weighting and coweighting respectively. Thus $\zeta$ has the magnitude by \cref{sum_of_w.c.}.

  (2) If $k$ is a field and $\zeta$ has the magnitude, then there exist a weighting $w$ and a coweighting $v$ on $\zeta$.
  Let $\zeta x$ be a zero-map for some $x : I \rightarrow k$. Then,
  \[
    0 = v (\zeta x) = (v \zeta) x = u_I x = \sum_{i \in I} x(i)
  \]
  ここからやり直し
\end{proof}

\begin{lemma}
  Let $\zeta$ be an invertible $I \times I$-matrix over a rig $k$.
  Then, $\zeta$ has the unique weighting $w$ of $\zeta$, given by $w(j) = \sum_{i \in I} \zeta^{-1}(j,i)$ for $j \in I$, and the unique coweighting $v$ of $\zeta$, given by $v(i) = \sum_{j \in I} \zeta^{-1}(j,i)$ for $i \in I$.
  Then, \[
    \# \zeta = \sum_{i,j \in I} \zeta^{-1}(j,i)
  \]
\end{lemma}

\begin{proof}
  We should check the uniqueness and it holds from the invertibility of $\zeta$.
\end{proof}


\subsection{The Definition of Enriched Categories}
In this document, we only treat the locally small categories, which means that for any objects $a,b$ of a category $\CC$, the hom-set $\Hom_{\CC}(a,b)$ is a set.


\begin{definition}\label{monoid}
  A category $\CC$ is called a \textit{monoid} if $\CC$ has only one object $*$ and $V=\Hom_{\CC}(*,*)$ is a monoid with the composition of morphisms as the binary operation and the identity morphism $id_*$ as the identity element. We denote the operation of $V$ by $\otimes$. \\
  ここに可換図式を挿入
\end{definition}

\begin{definition}
  A pair $(\VV, \otimes, I)$ is called a \textit{monoidal category} if it satisfies the following conditions:
  \begin{enumerate}[label=(\arabic*)]
    \item $\VV$ is a category.
    \item $\otimes : \VV \times \VV \rightarrow \VV$ is a functor.
    \item $I$ is an object of $\VV$.
    \item There exist the natural isomorphism $\alpha : \otimes \circ (\otimes \times id_{\VV}) \Rightarrow \otimes \circ (id_{\VV} \times \otimes)$ given by $\alpha_{uvw} : (u \otimes v) \otimes w \isom u \otimes (v \otimes w)$.
    \item There exist the natural isomorphism $\lambda : I \otimes - \Rightarrow id_{\VV}$ given by $\lambda_u : I \otimes u \isom u$.
    \item There exist the natural isomorphism $\rho : - \otimes I \Rightarrow id_{\VV}$ given by $\rho_u : u \otimes I \isom u$.
    \item The following diagram commutes for any objects $u,v,w,x$ of $\VV$:
    ここに可換図式を挿入
    \item The following diagrams commute for any objects $u,v$ of $\VV$:
    ここに可換図式を挿入
  \end{enumerate}
\end{definition}

We also call $\VV$ a monoidal category, omitting $\otimes$ and $I$.

\begin{example}
  \begin{enumerate}[label=(\roman*)]
    \item $(\textbf{Set}, \times, \{*\})$ is a monoidal category.
    ここに説明を挿入
    \item $(\textbf{Vect}_K, \otimes_K, K)$ is a monoidal category, where $K$ is a field.
    ここに説明を挿入
    \item $([0, \infty], +, 0)$ is a monoidal category.
    ここに説明を挿入
    \item $(\mathbf{2}, \otimes, t)$ is a monoidal category, where $\mathbf{2}$ is the category defined by $Ob(\mathbf{2}) = \{t,f\}$ and the morphism sets are defined by
    \begin{center}
      \begin{tabular}{c|cc}
        $\hom_{\mathbf{2}}$ & $t$ & $f$ \\
        \hline
        $t$ & $\{id_t\}$ & $\emptyset$ \\
        $f$ & $\{*\}$ & $\{id_f\}$ \\
      \end{tabular}
    \end{center}
    and the operation $\otimes$ is defined by the following table:
    \begin{center}
      \begin{tabular}{c|cc}
        $\otimes$ & $t$ & $f$ \\
        \hline
        $t$ & $t$ & $f$ \\
        $f$ & $f$ & $f$ \\
      \end{tabular}
    \end{center}
    ここに説明を挿入

    Then, $\mathbf{2}$ is a monoidal subcategory of $[0, \infty]$ by the embedding $t \mapsto 0, f \mapsto \infty$ and of $\textit{Set}$ by the embedding $t \mapsto \{*\}, f \mapsto \emptyset$.
  \end{enumerate}
\end{example}

\begin{definition}
  An \textit{enriched category} $\calA$ in a monoidal category $(\VV, \otimes, I)$ is defined as follows:

  \begin{enumerate}[label=(\arabic*)]
    \item For any objects $a,b$ of $\calA$, $\Hom_{\calA}(a,b)$ is an object of $\VV$.
    \item For any objects $a,b,c$ of $\calA$, there exists a morphism $m_{abc} : \Hom_{\calA}(b,c) \otimes \Hom_{\calA}(a,b) \rightarrow \Hom_{\calA}(a,c)$ in $\VV$, which defines the composition of morphisms.
    \item For any object $a$ of $\calA$, there exists a morphism $j_a : I \rightarrow \Hom_{\calA}(a,a)$ in $\VV$, which defines the identity morphism of $a$.
    あと３つの可換図式を挿入
  \end{enumerate}

  Then, $\calA$ is called a \textit{$\VV$-category}.
\end{definition}

\begin{definition}
  Let $\calA, \calA'$ be $\VV$-categories. A functor $F:\calA \rightarrow \calA'$ is called a \textit{$\VV$-functor} if it satisfies the following conditions. We denote $F_{ab} : \mor_{\calA}(a,b) \rightarrow \mor_{\calA'}(F(a),F(b))$ as the morphism function.
  \begin{enumerate}[label=(\arabic*)]
    \item The following diagram commutes for any objects $a,b,c$ of $\calA$:
    ここに可換図式を挿入
    \item The following diagram commutes for any object $a$ of $\calA$:
    ここに可換図式を挿入
  \end{enumerate}
\end{definition}

\begin{remark}
  The family of all $\VV$-categories and $\VV$-functors form a category, which is denoted by $\VV\textit{-Cat}$.
\end{remark}

\begin{example}
  aaa
\end{example}


\subsection{The Magnitude of Enriched Categories}
\begin{definition}
  Let $\CC$ be a category.
  The \textit{isomorphism classes} of objects of $\CC$ is defined by the quotient classes $\ob(\CC)/{\approx}$, where $a \approx b$ if and only if there exists an isomorphism $f : a \rightarrow b$ in $\CC$.
\end{definition}

In this section, we consider only monoidal categories $(\VV, \otimes, I)$ satisfying that $\VV / \approx$ forms a set.

\begin{lemma}
  Let $(\VV, \otimes, I)$ be a monoidal category.
  Then, $(\ob(\VV)/{\approx}, \otimes, I)$ is a monoid.
\end{lemma}

\begin{proof}
  aaa.
\end{proof}

\begin{definition}
  Let $(\VV, \otimes, I)$ be a monoidal category and let $k$ be a rig.
  We define a monoid homomorphism
  \[  | \cdot | : (\ob(\VV)/{\approx}, \otimes, I) \rightarrow (k, \cdot, 1_k)
  \]
  such that $|I| = 1_k$ and $|u \otimes v| = |u| \cdot |v|$ for any objects $u,v$ of $\VV$.
\end{definition}

\begin{example}
  aaa.
\end{example}

\begin{definition}
  Let $\VV$ be a monoidal category and let $\calA$ be a $\VV$-category which has finitely many objects.
  \begin{enumerate}[label=(\arabic*)]
    \item $\ob(\calA) \times \ob(\calA)$-matrix $\zeta_{\calA}$ is defined by 
    \[
      \zeta_{\calA}(a,b) = |\Hom_{\calA}(a,b)| \quad (a,b \in \ob(\calA))
    \]
    This $\zeta_{\calA}$ is called the \textit{similarity matrix} of $\calA$.

    \item A weighting on $\calA$ is defined to be a weighting on $\zeta_{\calA}$, similarly to a coweighting on $\calA$.
    
    \item $\calA$ is said to \textit{have the magnitude} if $\zeta_{\calA}$ has a weighting and a coweighting, denoting it by $\# \calA = \# \zeta_{\calA}$.
    
    \item $\calA$ which has the magnitude is said to \textit{have Mobius inversion} if $\zeta_{\calA}$ is invertible, denoting its inverse by $\mu_{\calA} = \zeta_{\calA}^{-1}$.
  \end{enumerate}
\end{definition}


\begin{example}
  aaa.
\end{example}


  \subsection{The Relation of The Magnitudes of Graphs and Enriched Categories}
\begin{theorem}
  The magnitude of a graph $G$ defined in \cref{magnitude_graphs} coincides with the magnitude of the $[0, \infty]$-category corresponding to $G$.
\end{theorem}

\begin{proof}
  We show that a graph $G$ is $[0, \infty]$-category and its magnitude coincides with the magnitude of $G$ defined in \cref{magnitude_graphs}. \\
  First, as we see in examples, generalized metric spaces are $[0, \infty]$-categories, which shows that $G$ is $[0, \infty]$-category with the metric $d_G$. \\
  Second, let a monoid homomorphism $|\cdot| : [0, \infty] \rightarrow \QQ(q)$ defined by $|x| = q^x$.
  Then, the similarity matrix $\zeta_G$ of the $[0, \infty]$-category corresponding to $G$ is given by
  \[
    \zeta_G(a,b) = |\Hom_G(a,b)| = |d_G(a,b)| = q^{d_G(a,b)}.
  \]
  This coincides with the $Z_G(q)$ defined in \cref{magnitude_graphs}. \\
  Therefore, the magnitude of the $[0, \infty]$-category corresponding to $G$ coincides with the magnitude of $G$ defined in \cref{magnitude_graphs}.
\end{proof}

\begin{theorem}
  グラフのテンソル積がcatesian productに対応する
\end{theorem}


\newpage
\appendix
\counterwithin{theorem}{section}
\addcontentsline{toc}{section}{Appendix}
\section*{Appendix}

\section{The calculation of Graph Automorphisms}
\begin{proposition}
  Let $G = K_{n,n}$. Then, $\aut(G) \approx (\mathfrak{S}_n \times \mathfrak{S}_n) \rtimes_s \ZZ_2$, where $s : \ZZ_2 \rightarrow \aut(G); 0 \mapsto id_G, 1 \mapsto \tau$ and $\tau$ is the automorphism which interchanges the two parts of $K_{n,n}$.
\end{proposition}

\begin{proof}
  Now, 
  \[
    0 \rightarrow \mathfrak{S}_n \times \mathfrak{S}_n \xrightarrow{incl} \aut(G) \xrightarrow{s} \ZZ_2 \rightarrow 0
  \]
  is exact and this sequence splits. Thus, we have $\aut(G) \approx (\mathfrak{S}_n \times \mathfrak{S}_n) \rtimes_s \ZZ_2$.
\end{proof}








\newpage
\begin{thebibliography}{9}

\bibitem{Leinster1}
Leinster, Tom.
\textit{The magnitude of a graph.(English summary)}.
Math. Proc. Cambridge Philos. Soc. 166 (2019), no. 2, 247–264.

\bibitem{Leinster2}
Leinster, Tom.
\textit{The magnitude of metric spaces.(English summary)}
Doc. Math. 18 (2013), 857–905.

\bibitem{HepworthWillerton}
Hepworth, Richard, Willerton, Simon
\textit{Categorifying the magnitude of a graph.(English summary)}.
Homology Homotopy Appl. 19 (2017), no. 2, 31–60.

\bibitem{Kelly}
Kelly, G. M.
\textit{Basic concepts of enriched category theory.}
Reprint of the 1982 original [Cambridge Univ. Press, Cambridge; MR0651714]
Repr. Theory Appl. Categ. No. 10 (2005), vi+137 pp.

\end{thebibliography}



\end{document}
